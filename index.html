<!DOCTYPE html>
<html lang="ru">
    <head>
        <link rel="stylesheet" href="styles/style.css">

        <title>Городской Транспорт</title>

    </head>
    <body>
      <timer>
        <div id="square"></div>
        <p id="countdown">Ожидание запуска</p>
          <button id="startButton">закрыть</button>
          
          <script>
            const countdownDisplay = document.getElementById('countdown');
            const startButton = document.getElementById('startButton');
            let timeLeft = 15; // Изменили начальное значение на 15
            let timer;
          
            function updateCountdown() {
              countdownDisplay.textContent = `Действует: ${timeLeft} сек.`;
              timeLeft--;
          
              if (timeLeft < 0) {
                countdownDisplay.textContent = `Истёк`;
                clearInterval(timer);
              }
            }
          
            function startTimer() {
              startButton.disabled = true; // Отключаем кнопку
              timeLeft = 15; // Сбрасываем значение
          
              updateCountdown(); // Запускаем немедленно
              timer = setInterval(updateCountdown, 1000);
            }
          
            startButton.addEventListener('click', startTimer);
          </script>
      </timer>

        

        <upinter>
          <hr id="hr6" width="40%" size="2" color="e21a1a">

          <b id="codeDisplay"></b>
          <b id="control">Контроль</b>

          <img id="tiket" src="imeges/tiket.jpg">
          <img id="person2" src="imeges/person.jpg">

          <script>
            function calculation(first, second) {
              const dtnowist = Math.floor(second);
              const dtdelta = first - dtnowist;
              const dtdeltaday = Math.floor(dtdelta / 86400);
              return dtdeltaday;
            }
          
            const start_numder_tiket = 947467025;
            const dtnow = Date.now() / 1000;
            const dtbase = 1739709449;
          
            const ist = calculation(dtnow, dtbase) * 379281 + start_numder_tiket;
          
            function formatNumber(number) {
              const numStr = Math.floor(number).toString(); // Преобразуем в строку и отбрасываем дробную часть
              let formattedNumber = "";
          
              for (let i = numStr.length - 1; i >= 0; i--) {
                formattedNumber = numStr[i] + formattedNumber;
                if ((numStr.length - 1 - i) % 3 === 2 && i !== 0) {
                  formattedNumber = " " + formattedNumber; // Добавляем пробел после каждой третьей цифры (с конца)
                }
              }
          
              return formattedNumber;
            }
          
            const codeDisplay = document.getElementById("codeDisplay");
            codeDisplay.textContent = formatNumber(ist);
          </script>
        </upinter>



        <perev>
          <b id="name_of_the_carrier">Перевозчик</b>
         
          <input type="text"
          placeholder="Введите перевозчика"
          value="КПАТП-5"
          id="name_of_the_carrier_interactiv">

          <img id="person" src="imeges\person.jpg">

        </perev>

        <marsh>
          <select name="city" id="city-select">
            <option value="">Выберите маршрут</option>
            <option value="sol-zor">мкрн. Солнечный - мкрн. Тихие зори</option>
            <option value="zor-sol">мкрн. Тихие зори - мкрн. Солнечный</option>
            <option value="mol-sol">Молодежная - Солнечный</option>
            <option value="sol-mol">Солнечный - Молодежная</option>
          </select>

          <input type="text"
          placeholder="Введите номер автобуса"
          id="route">

          <img id="autod" src="imeges\auto.jpg">

        </marsh>

        <stoim>
          <b id="stoim">Стоимость</b>

          <b id="price">1 шт., Полный, 44.00 ₽</b>

          <img id="rub" src="imeges/rub.jpg">

        </stoim>

        <date>
          <b id="data">Дата покупки</b>

          <p><span id="currentDate"></span></p>

          <script>
            const currentDate = new Date(); // Создаем объект даты
            const day = currentDate.getDate(); // Получаем день месяца
            const monthNames = ["Января", "Февраля", "Марта", "Апреля", "Мая", "Июня",
                               "Июля", "Августа", "Сентября", "Октября", "Ноября", "Декабря"];
            const month = monthNames[currentDate.getMonth()]; // Получаем название месяца
            const year = currentDate.getFullYear(); // Получаем год
          
            const formattedDate = `${day} ${month} ${year} г.`; // Добавляем " г."
          
            document.getElementById("currentDate").textContent = formattedDate; // Вставляем в HTML
          </script>

          <img id="calen" src="imeges/calen.jpg">

        </date>

        <vrem>
          <b id="vrem">Время покупки</b>

          <p> <span id="currentTime"></span></p>
          <script>
          function updateTime() {
              const now = new Date();
              const hours = now.getHours().toString().padStart(2, '0'); // Добавляем ведущий ноль
              const minutes = now.getMinutes().toString().padStart(2, '0'); // Добавляем ведущий ноль
              const timeString = `${hours}:${minutes}`;
              document.getElementById("currentTime").textContent = timeString;
          }
          // Обновляем время каждую секунду
          setInterval(updateTime, 1000);
          // Вызываем updateTime() сразу, чтобы время отображалось при загрузке страницы
          updateTime();
          </script>

          <img id="clock" src="imeges/clock.jpg">

        </vrem>


        <hrs>
          <hr id="hr1" width="100%" size="2" color=#2c3544 >

          <hr id="hr2" width="90%" size="2" color=#2c3544 >

          <hr id="hr3" width="90%" size="2" color=#2c3544 >

          <hr id="hr4" width="90%" size="2" color=#2c3544 >

          <hr id="hr5" width="90%" size="2" color=#2c3544 >
        </hrs>

    </body>
</html>
